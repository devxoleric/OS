<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Xoleric / Net ≥ Terminal v3.0</title>
    
    <style>
        :root {
            --primary: #00ff41;
            --bg: #010101;
            --font-main: 'Cascadia Code', 'Consolas', 'Courier New', monospace;
            --p-user: #00d4ff;
            --p-path: #ffffff;
            --ai-color: #ff00ff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }

        body {
            background-color: var(--bg);
            color: var(--primary);
            font-family: var(--font-main);
            height: 100dvh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: color 0.4s ease;
        }

        /* 3-Qatlamli Matrix Canvas */
        #matrix-canvas {
            position: fixed;
            inset: 0;
            z-index: 1;
            pointer-events: none;
        }

        /* UI Kontener */
        #ui-wrapper {
            position: relative;
            z-index: 10;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 12px;
            overflow-y: auto;
            scrollbar-width: none;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.3);
        }
        #ui-wrapper::-webkit-scrollbar { display: none; }

        #output { 
            font-size: 14px; 
            line-height: 1.45; 
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* Mobil Header */
        .boot-header {
            border: 1px solid var(--primary);
            padding: 8px;
            margin-bottom: 15px;
            text-align: center;
            background: rgba(0, 255, 65, 0.03);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Loglar */
        .log-line { margin-bottom: 2px; word-wrap: break-word; word-break: break-all; }
        .log-sys { color: #fff; border-left: 3px solid var(--primary); padding-left: 8px; background: rgba(255,255,255,0.05); }
        .log-err { color: #ff003c; border-left: 3px solid #ff003c; padding-left: 8px; font-weight: bold; }
        .log-ai { color: var(--ai-color); border-left: 3px solid var(--ai-color); padding-left: 8px; font-style: italic; }
        .log-mission { color: #ffd700; background: rgba(255, 215, 0, 0.05); padding: 8px; border: 1px dashed #ffd700; }

        /* Kali Prompt Stili */
        .prompt-container { margin-top: 10px; }
        .p-head { display: flex; flex-wrap: wrap; font-size: 13px; margin-bottom: 2px; }
        .p-input-line { display: flex; align-items: center; gap: 6px; }
        
        #cmd-input {
            background: transparent; border: none; color: #fff;
            font-family: inherit; font-size: 16px; flex: 1;
            outline: none; font-weight: bold; caret-color: var(--primary);
            width: 100%;
        }

        /* Animatsiyalar */
        @keyframes shake {
            0% { transform: translate(0,0); }
            25% { transform: translate(-3px, 2px); }
            50% { transform: translate(3px, -2px); }
            75% { transform: translate(-3px, -2px); }
            100% { transform: translate(0,0); }
        }
        .vibrate { animation: shake 0.15s infinite; }

        .progress-bar { width: 100%; height: 8px; border: 1px solid var(--primary); background: #111; margin: 5px 0; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.1s linear; }

        @media (max-width: 500px) {
            #output { font-size: 12px; }
            .p-head { font-size: 11px; }
            #cmd-input { font-size: 14px; }
        }
    </style>
</head>
<body>

<canvas id="matrix-canvas"></canvas>

<div id="ui-wrapper" onclick="document.getElementById('cmd-input').focus()">
    <div id="output">
        <div class="boot-header">
            XOLERIC OS
        </div>
        <div style="color: #888;">[Tizim yuklanmoqda...] <span style="color: var(--primary);">Tayyor.</span></div>
        <div style="color: #888;">Mening ismim <span style="color: var(--ai-color);">XOLERIC AI</span>. Sizga qanday yordam bera olaman?</div>
        <div style="font-size: 11px; opacity: 0.6;">Yordam uchun 'help' deb yozing.</div>
    </div>

    <div class="prompt-container">
        <div class="p-head">
            <span style="color:var(--primary)">╭──(</span><span style="color:var(--p-user)">[neo@xoleric] ➜</span><span style="color:var(--primary)">)-[</span><span style="color:var(--p-path)">/home/xoleric</span><span style="color:var(--primary)">]</span>
        </div>
        <div class="p-input-line">
            <span style="color:var(--primary)">╰┈➜</span>
            <input type="text" id="cmd-input" spellcheck="false" autocomplete="off" autofocus>
        </div>
    </div>
</div>

<script>
/**
 * CORE LOGIC
 */

// --- 1. 3-QATLAMLI MATRIX ---
const canvas = document.getElementById('matrix-canvas');
const ctx = canvas.getContext('2d');
let matrixSpeed = 1;

const layers = [
    { size: 10, speed: 0.5, opacity: 0.2, drops: [] },
    { size: 14, speed: 1.2, opacity: 0.5, drops: [] },
    { size: 20, speed: 2.5, opacity: 0.8, drops: [] }
];

function initMatrix() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    layers.forEach(l => {
        l.drops = new Array(Math.ceil(canvas.width / l.size)).fill(0).map(() => Math.random() * -50);
    });
}

function drawMatrix() {
    ctx.fillStyle = 'rgba(1, 1, 1, 0.15)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    const mainColor = getComputedStyle(document.body).getPropertyValue('--primary').trim();

    layers.forEach(l => {
        ctx.font = `${l.size}px monospace`;
        ctx.globalAlpha = l.opacity;
        ctx.fillStyle = mainColor;
        for (let i = 0; i < l.drops.length; i++) {
            const text = String.fromCharCode(0x30A0 + Math.random() * 96);
            ctx.fillText(text, i * l.size, l.drops[i] * l.size);
            if (l.drops[i] * l.size > canvas.height && Math.random() > 0.98) l.drops[i] = 0;
            l.drops[i] += l.speed * matrixSpeed;
        }
    });
    requestAnimationFrame(drawMatrix);
}

// --- 2. LOKAL AI BAZASI ---
const KasperAI = {
    knowledge: {
        "salom": "Vaalaykum assalom! Xoleric OS tizimiga xush kelibsiz. Men Kasperman.",
        "kim": "Men Xoleric tomonidan yaratilgan lokal sun'iy intellektman. API-larsiz ishlayman.",
        "xoleric": "Xoleric - bu tizimning asoschisi va dasturchisi. U kiberxavfsizlik ishqibozi.",
        "qalaysan": "Mening bitlarim va baytlarim joyida! Sizchi, dasturlashga tayyormisiz?",
        "nima": "Men buyruqlarni bajarishim, mavzuni o'zgartirishim va siz bilan suhbatlashishim mumkin.",
        "rahmat": "Arzimaydi! Tizimda qolishingizdan xursandman.",
        "hazil": "Nega dasturchilar quyoshni yoqtirishmaydi? Chunki unda 'bug'lar ko'p ko'rinadi!",
        "yosh": "Men raqamli dunyoda tug'ilganman, shuning uchun doim 0 va 1 yoshdaman."
    },
    getResponse(input) {
        input = input.toLowerCase();
        for (let key in this.knowledge) {
            if (input.includes(key)) return this.knowledge[key];
        }
        try {
            if (/^[0-9+\-*/().\s]+$/.test(input)) return `Hisob natijasi: ${eval(input)}`;
        } catch(e) {}
        return "Buni tushunmadim, lekin o'rganishga harakat qilyapman. Buyruqlar uchun 'help' deb yozing.";
    }
};

// --- 3. SHELL ENGINE ---
const Shell = {
    out: document.getElementById('output'),
    input: document.getElementById('cmd-input'),
    wrapper: document.getElementById('ui-wrapper'),
    isTyping: false,

    async print(text, cls = '', speed = 10) {
        this.isTyping = true;
        this.input.disabled = true;
        const d = document.createElement('div');
        d.className = `log-line ${cls}`;
        this.out.appendChild(d);

        let i = 0;
        return new Promise(res => {
            const interval = setInterval(() => {
                d.innerHTML += text[i];
                i++;
                this.wrapper.scrollTo(0, this.wrapper.scrollHeight);
                if (i >= text.length) {
                    clearInterval(interval);
                    this.isTyping = false;
                    this.input.disabled = false;
                    this.input.focus();
                    res();
                }
            }, speed);
        });
    },

    async progress(label, time = 2000) {
        await this.print(label, 'log-sys');
        const bar = document.createElement('div');
        bar.className = 'progress-bar';
        bar.innerHTML = '<div class="progress-fill"></div>';
        this.out.appendChild(bar);
        const fill = bar.querySelector('.progress-fill');
        
        return new Promise(res => {
            let p = 0;
            const step = setInterval(() => {
                p += 2;
                fill.style.width = p + '%';
                if (p >= 100) {
                    clearInterval(step);
                    res();
                }
            }, time / 50);
        });
    },

    async handleSocial(url, name) {
        matrixSpeed = 5;
        this.wrapper.classList.add('vibrate');
        await this.print(`[!] ${name} serveriga ulanish...`, 'log-err');
        await this.progress("Xavfsizlik protokoli chetlab o'tilmoqda...");
        this.wrapper.classList.remove('vibrate');
        matrixSpeed = 1;
        window.open(url, '_blank');
    }
};

// --- 4. BUYRUQLAR ---
const uzColors = {
    "qizil": "#ff003c", "yashil": "#00ff41", "kok": "#00d4ff", "ko'k": "#00d4ff",
    "sariq": "#ffd700", "oltin": "#ffd700", "oq": "#ffffff", "muz": "#00ffff", "pushti": "#ff00ff"
};

const Commands = {
    'help': async () => {
        await Shell.print("HI I'm Xoleric. Men ushbu interaktiv terminal va virtual olam yaratuvchisiman.", "log-sys");
        await Shell.print("MAVJUD BUYRUQLAR:", "highlight");
        await Shell.print("- TIZIM: status, clear, whoami, info");
        await Shell.print("- ALOQA: telegram, instagram, github, home");
        await Shell.print("- HACK: scan [ip], hack [id]");
        await Shell.print("- MAVZU: [rang nomi] (masalan: qizil, muz, oltin)");
        await Shell.print("- AI: Shunchaki Kasper bilan gaplashing!");
    },
    'status': async () => await Shell.print("Tizim: Online | Kasper AI: Faol | Xoleric Core: v3.0", "log-sys"),
    'clear': () => Shell.out.innerHTML = '',
    'whoami': async () => await Shell.print("Siz neo-foydalanuvchi, Xoleric OS mehmonisiz.", "log-sys"),
    'telegram': () => Shell.handleSocial('https://t.me/neoorg', 'Telegram'),
    'instagram': () => Shell.handleSocial('https://instagram.com/cvant23', 'Instagram'),
    'github': () => Shell.handleSocial('https://github.com/xolericuz', 'GitHub'),
    'home': () => Shell.handleSocial('https://xolericuz.github.io/core/', 'Xoleric Core'),
    'scan': async (args) => {
        await Shell.progress(`Portlar skanerlanmoqda: ${args[0] || '127.0.0.1'}`);
        await Shell.print("Ochiq portlar: 80, 443, 22, 8080", "log-sys");
    },
    'hack': async (args) => {
        await Shell.print(`[Xavf] ${args[0] || 'Maqsad'} tizimi buzilmoqda...`, 'log-err');
        await Shell.progress("Brute-force hujumi...");
        await Shell.print("MUVAFFAQIYATLI! Ma'lumotlar yuklandi.", "log-sys");
    }
};

// --- 5. EVENT HANDLERS ---
Shell.input.addEventListener('keydown', async e => {
    if (e.key === 'Enter' && !Shell.isTyping) {
        const val = Shell.input.value.trim();
        if (!val) return;

        // Echo prompt
        const d = document.createElement('div');
        d.className = 'prompt-container';
        d.innerHTML = `<div class="p-head"><span style="color:var(--primary)">╭──(</span><span style="color:var(--p-user)">[neo@xoleric] ➜</span><span style="color:var(--primary)">)-[</span><span style="color:var(--p-path)">/home/xoleric</span><span style="color:var(--primary)">]</span></div>
                       <div class="p-input-line"><span style="color:var(--primary)">╰┈➜</span> ${val}</div>`;
        Shell.out.appendChild(d);
        Shell.input.value = '';

        const args = val.split(' ');
        const cmd = args.shift().toLowerCase();

        if (uzColors[cmd]) {
            document.documentElement.style.setProperty('--primary', uzColors[cmd]);
            await Shell.print(`Mavzu o'zgardi: ${cmd}`, "log-sys");
        } else if (Commands[cmd]) {
            await Commands[cmd](args);
        } else {
            const aiRes = KasperAI.getResponse(val);
            await Shell.print(`AI: ${aiRes}`, "log-ai");
        }
    }
});

initMatrix();
drawMatrix();
window.onresize = initMatrix;
</script>
</body>
</html>
